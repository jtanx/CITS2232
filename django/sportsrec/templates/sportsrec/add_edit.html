{% extends "sportsrec/base.html" %}

{% block main %}
<div class="widget">
  <div class="form-small">
    <div class="title centre">
      {% if created %}
        Add a
      {% elif apply %}
        Apply for
      {% else %}
        Edit
      {% endif %}

      {% if detail_view %}
      <a href="{% url detail_view pk=pk %}">{{ name }}</a>
      {% else %}
      {{ name }}
      {% endif %}
    </div>

    <form method="post" action="">
      {% csrf_token %}
      {# Include the hidden fields #}
      {% for hidden in form.hidden_fields %}
      {{ hidden }}
      {% endfor %}
      {# Include the visible fields #}
      {% for field in form.visible_fields %}
          <div class="fieldWrapper">
            <div class="{% if field.field.required %} bold {%endif%}">
              {{ field.label_tag }}
            </div>
            {{ field }}
            {% for error in field.errors %}
            <div class="fail">{{ error|escape }}</div>
            {% endfor %}
          </div>
      {% endfor %}
      <p style="float:right; margin:0;">
         <input type="submit" value="{{ submit }}">
      </p>

      <div id="result">
        <div class="fail">
          {{ form.non_field_errors }}
          {{ fail }}
        </div>
        <div class="pass">
          {{ pass }}
        </div>
      </div>
  </form>
  {% block form-data %}
  {% endblock %}
  </div>
  
  {% if delete_view %}
  <div class="large centre clear">
    Delete <a href="{% url delete_view pk=pk %}">{{delete_text}}</a>
  </div>
  {% endif %}
  
  {% if user_profile and admin %}
  <div class="large centre clear">
    <a href="{% url 'sportsrec:user_demote' pk=user.id %}">Revoke your admin status</a>
  </div>
  {% endif %}
</div>

{% endblock %}

{% block pre-content %}
{# add content here #}
<div id="sidebar-right">
  {# eg #}
  {% if club_edit %}
  <div class="widget">
    <div class="title">Club edit stuff</div>
    For clubs
  </div>
  {% elif member_edit %}
  <div class="widget">
    For members
  </div>
  
  {# afaik values are club_edit, club_add, member_add, member_edit, and user_profile #}
  {% endif %}
</div>
{% endblock %}
