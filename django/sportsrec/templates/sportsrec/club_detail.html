{% extends 'sportsrec/base.html' %}
{% block main %}
  <div class="widget">
    <div class="title centre">{{club.name}}</div>
    <div class="large bold">Club details</div>
    
    <table class="horizontal">
    <tr><th>Club ID</th><td>{{club.id}}</td></tr>
    <tr><th>Address</th><td>{{club.address}}</td></tr>
    <tr><th>Location</th><td>{{club.location}}</td></tr>
    <tr>
      <th>Tags</th>
      <td>{%for tag in club.tags.all%}{{tag}}{% endfor %}</td>
    </tr>
    <tr><th>Type</th><td>{{club.type}}</td></tr>
    <tr><th>Member count</th><td>{{club.member_count}}</td></tr>
    <tr><th>Date created</th><td>{{club.created}}</td></tr>
    <tr><th>Recruiting</th><td>{%if club.recruiting%}Yes{%else%}No{%endif%}</td></tr>
    <tr>
      <th>Contact</th>
      {% if club.contact %}
      <td class="menu-hilight clickable">
        <a href="{% url 'sportsrec:member_detail' pk=club.contact.id%}">
          {{club.contact|default:''}}
        </a>
      </td>
      {% endif %}
    </tr>
    <tr>
      <th>Owner</th>
      <td class="menu-hilight clickable">
        {% if club.owner %}
        <a href="{% url 'sportsrec:member_detail' pk=club.owner.id%}">
           {{club.owner.first_name}} {{club.owner.last_name}}
        </a>
        {% endif %}
      </td>
      
    </tr>
    <tr>
      <th>Facebook</th>
      <td class="clickable menu-hilight">
        {% if club.facebook %}
        <a href="https://facebook.com/{{club.facebook}}">{{club.facebook}}</a>
        {% endif %}
      </td>
    </tr>
    <tr>
      <th>Twitter</th>
      <td class="clickable menu-hilight">
        {% if club.twitter %}
        <a href="https://twitter.com/{{club.twitter}}">{{club.twitter}}</a>
        {% endif %}
      </td>
    </tr>
    <tr><th>Description</th><td class="break">{{club.description}}</td></tr>
  </table>

  {% if club.owner.owner == user or admin %}
  <div class="large centre bold">
    <a href="{% url 'sportsrec:club_edit' pk=club.id %}">
      Edit this club
    </a>
  </div>
  {% endif %}
  </div>
  
  <div class="widget">
    <div class="title">Club map</div>
    <div id="map-canvas" style="width:100%;height:300px;"></div>
    <script src="https://maps.googleapis.com/maps/api/js?v=3key={AIzaSyAH5OCkIGApptBzMQGjs_Wlz8kc6xqTg8o}&sensor=false"></script>
    <script>
    	var geocoder;
      var map;
      function initialize() {
      	geocoder = new google.maps.Geocoder();
      	var latlng = new google.maps.LatLng(-31.9522, 115.8589);
        var mapOptions = {
          zoom: 8,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
      }
      
      function codeAddress() {
      	var address = {{club.address}}
      	geocoder.geocode( { {{club.address}} : address}, function(results, status) {
      		if (status == google.maps.GeocoderStatus.OK) {
      			map.setCenter(results[0].geometry.location);
      			var marker = new google.maps.Marker({
      				map: map;
      				position: results[0].geometry.location
      			});
      		
      		} else {
      			alert('Geocoder was not successful for the following reason: ' + status);
      		}
      	});
      }
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </div>

  <div class="widget">
    <div class="large centre bold">
      <a href="{% url 'sportsrec:membership_apply' pk=club.id %}">
        Apply
      </a>
      to this club!
    </div>
  </div>

    
{% endblock %}